# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤ (Neira Project Rules)

> **–í–ê–ñ–ù–û:** –≠—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã. –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –¥–æ–ª–≥—É.

---

## üö´ –°–¢–û–ü-–ü–†–ê–í–ò–õ–ê (–Ω–∞—Ä—É—à–µ–Ω–∏–µ = –æ—Ç–∫–∞—Ç)

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
‚ùå –ó–ê–ü–†–ï–©–ï–ù–û —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞–ø–∫–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–π –≤ neira/
```

**–ö—É–¥–∞ –∫–ª–∞—Å—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥:**
| –¢–∏–ø —Ñ–∞–π–ª–∞ | –ü—É—Ç—å |
|-----------|------|
| –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ | `neira/core/`, `neira/brain/`, `neira/organs/` |
| –£—Ç–∏–ª–∏—Ç—ã | `neira/utils/` |
| CLI —Å–∫—Ä–∏–ø—Ç—ã | `scripts/` |
| –¢–µ—Å—Ç—ã | `tests/unit/` –∏–ª–∏ `tests/integration/` |

### 2. –î—É–±–ª–∏–∫–∞—Ç—ã
```
‚ùå –ó–ê–ü–†–ï–©–ï–ù–û —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª –µ—Å–ª–∏ –ø–æ—Ö–æ–∂–∏–π —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚úÖ –°–Ω–∞—á–∞–ª–∞ –ø–æ–∏—â–∏: grep -r "class –ò–º—è–ö–ª–∞—Å—Å–∞" –∏–ª–∏ semantic_search
```

**–ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞:**
1. –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏: `file_search("*–∏–º—è*")`
2. –ü–æ–∏—Å–∫ –ø–æ —Ñ—É–Ω–∫—Ü–∏–∏: `grep_search("def —Ñ—É–Ω–∫—Ü–∏—è")`
3. –ï—Å–ª–∏ –Ω–∞—à—ë–ª –ø–æ—Ö–æ–∂–µ–µ ‚Äî —Ä–∞—Å—à–∏—Ä—è–π —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ

### 3. –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
```
‚ùå –ó–ê–ü–†–ï–©–ï–ù–û: —Ñ–∞–π–ª > 500 —Å—Ç—Ä–æ–∫, —Ñ—É–Ω–∫—Ü–∏—è > 60 —Å—Ç—Ä–æ–∫, –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å > 3
‚úÖ –†–∞–∑–±–∏–≤–∞–π –Ω–∞ –º–æ–¥—É–ª–∏ –°–†–ê–ó–£, –Ω–µ "–ø–æ—Ç–æ–º"
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```python
# ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û:
except:
    pass

except Exception:
    pass

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
except (ValueError, TypeError) as e:
    logger.warning(f"–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã: {e}")
    # –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–ª–∏ raise
```

### 5. Magic numbers
```python
# ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û:
if len(items) > 1000:
    cleanup()

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
MAX_ITEMS = 1000  # –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –∏–ª–∏ config.py

if len(items) > MAX_ITEMS:
    cleanup()
```

---

## üìã –ß–ï–ö-–õ–ò–°–¢ –ü–ï–†–ï–î –ö–û–ú–ú–ò–¢–û–ú

–ê–≥–µ–Ω—Ç **–û–ë–Ø–ó–ê–ù** –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –∑–∞–¥–∞—á–∏:

- [ ] `python -m py_compile —Ñ–∞–π–ª.py` ‚Äî —Å–∏–Ω—Ç–∞–∫—Å–∏—Å OK
- [ ] `python -m pytest tests/test_basic.py -x` ‚Äî –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ù–æ–≤—ã–π —Ñ–∞–π–ª –ù–ï –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
- [ ] –í—Å–µ `except` –∏–º–µ—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- [ ] –§—É–Ω–∫—Ü–∏–∏ < 60 —Å—Ç—Ä–æ–∫
- [ ] Type hints –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–∞—Ö

---

## üîß –ü–†–û–¶–ï–°–° –†–ê–ë–û–¢–´

### –¶–∏–∫–ª: AUDIT ‚Üí PLAN ‚Üí IMPLEMENT ‚Üí TEST ‚Üí VERIFY

1. **AUDIT** ‚Äî –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –Ω–∞–π–¥–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–π –∫–æ–¥
2. **PLAN** ‚Äî –æ–ø–∏—à–∏ —á—Ç–æ –∏–∑–º–µ–Ω–∏—à—å (–∫—Ä–∞—Ç–∫–æ)
3. **IMPLEMENT** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. **TEST** ‚Äî –∑–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã
5. **VERIFY** ‚Äî –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ —Å–ª–æ–º–∞–ª –∏–º–ø–æ—Ä—Ç—ã

### –ü—Ä–∏–Ω—Ü–∏–ø ¬´–ù–µ –Ω–∞–≤—Ä–µ–¥–∏¬ª
```
–õ—É—á—à–µ –ù–ï –¥–µ–ª–∞—Ç—å —Ñ–∏—á—É, —á–µ–º —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ.
–õ—É—á—à–µ 1 —Ñ–∞–π–ª —á–µ–º 3 —Ñ–∞–π–ª–∞ —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏.
–õ—É—á—à–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–æ–¥—É–ª—å —á–µ–º —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π.
```

---

## üêç PYTHON –°–¢–ê–ù–î–ê–†–¢–´

### Type Hints (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
```python
def process(
    text: str,
    context: dict[str, Any] | None = None,  # Optional —á–µ—Ä–µ–∑ |
    max_tokens: int = 1000
) -> str:
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç.
    
    Args:
        text: –í—Ö–æ–¥–Ω–æ–π —Ç–µ–∫—Å—Ç
        context: –ö–æ–Ω—Ç–µ–∫—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        max_tokens: –õ–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤
        
    Returns:
        –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
        
    Raises:
        ValueError: –ï—Å–ª–∏ text –ø—É—Å—Ç–æ–π
    """
```

### –ò–º–ø–æ—Ä—Ç—ã
```python
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
import os
from pathlib import Path

# –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
import aiohttp

# –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
from neira.core import Cell
from neira.utils import remove_duplicates
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
import logging
logger = logging.getLogger(__name__)

# –ù–µ print()! –ò—Å–ø–æ–ª—å–∑—É–π logger
logger.info("–û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞")
logger.warning(f"–ü—Ä–æ–±–ª–µ–º–∞: {details}")
logger.error(f"–û—à–∏–±–∫–∞: {e}", exc_info=True)
```

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
```python
# ‚ùå –ù–ò–ö–û–ì–î–ê:
exec(user_input)
eval(user_input)
subprocess.run(f"cmd {user_input}", shell=True)
pickle.load(untrusted_file)

# ‚ùå Path traversal:
open(user_path)  # –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

# ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ:
safe_path = Path(base_dir) / Path(user_path).name
if safe_path.resolve().is_relative_to(base_dir):
    open(safe_path)
```

### –°–µ–∫—Ä–µ—Ç—ã
```
‚ùå –¢–æ–∫–µ–Ω—ã, –ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ
‚úÖ –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ os.environ –∏–ª–∏ .env (–∫–æ—Ç–æ—Ä—ã–π –≤ .gitignore)
```

---

## üìÅ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê NEIRA

```
neira/                    # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç
‚îú‚îÄ‚îÄ core/                 # –Ø–¥—Ä–æ: Cell, Memory, LLM
‚îú‚îÄ‚îÄ brain/                # –ú–æ–∑–≥: Cortex, Organs
‚îú‚îÄ‚îÄ utils/                # –£—Ç–∏–ª–∏—Ç—ã: text, rate_limiter
‚îî‚îÄ‚îÄ cli/                  # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

scripts/                  # Standalone —É—Ç–∏–ª–∏—Ç—ã
tests/                    # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ unit/                 # –ë—ã—Å—Ç—Ä—ã–µ, —Å –º–æ–∫–∞–º–∏
‚îî‚îÄ‚îÄ integration/          # –¢—Ä–µ–±—É—é—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

docs/                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
artifacts/                # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã, –ª–æ–≥–∏
```

**–ü—Ä–∞–≤–∏–ª–æ:** –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å –∫—É–¥–∞ –ø–æ–ª–æ–∂–∏—Ç—å ‚Äî —Å–ø—Ä–æ—Å–∏, –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π –≤ –∫–æ—Ä–Ω–µ.

---

## üö® –ö–†–ê–°–ù–´–ï –§–õ–ê–ì–ò (–æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å –∏ —Å–ø—Ä–æ—Å–∏)

1. –°–æ–∑–¥–∞—ë—à—å —Ñ–∞–π–ª —Å –ø–æ—Ö–æ–∂–∏–º –∏–º–µ–Ω–µ–º –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
2. –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—Ç—ë—Ç > 60 —Å—Ç—Ä–æ–∫
3. –ö–æ–ø–∏—Ä—É–µ—à—å –∫–æ–¥ –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª–∞
4. –ò—Å–ø–æ–ª—å–∑—É–µ—à—å `except:` –∏–ª–∏ `except Exception:`
5. –•–∞—Ä–¥–∫–æ–¥–∏—à—å —á–∏—Å–ª–∞/—Å—Ç—Ä–æ–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è
6. –§–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

---

## üìù –Ø–∑—ã–∫

- –ö–æ–¥: –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ docstrings: —Ä—É—Å—Å–∫–∏–π
- –õ–æ–≥–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: —Ä—É—Å—Å–∫–∏–π
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏: –∞–Ω–≥–ª–∏–π—Å–∫–∏–π OK

---

## ‚úÖ –ù–ê–ì–†–ê–î–ê –ó–ê –°–û–ë–õ–Æ–î–ï–ù–ò–ï

–ß–∏—Å—Ç—ã–π –∫–æ–¥ = –º–µ–Ω—å—à–µ –±–∞–≥–æ–≤ = —Å—á–∞—Å—Ç–ª–∏–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –ø—Ä–æ–µ–∫—Ç –∂–∏–≤—ë—Ç –¥–æ–ª–≥–æ.
