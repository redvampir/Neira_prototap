#!/usr/bin/env python3
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è Neira
–°–∏–º—É–ª–∏—Ä—É–µ—Ç –¥–∏–∞–ª–æ–≥ —Å —Ç–µ–≥–∞–º–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–æ–≤
"""

import re

def simulate_organ_detection(message: str) -> dict:
    """–°–∏–º—É–ª–∏—Ä—É–µ—Ç –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–≥–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–æ–≤"""
    
    organ_tags = ["#—Å–æ–∑–¥–∞–π_–æ—Ä–≥–∞–Ω", "#grow_organ", "#create_organ", "#–Ω–æ–≤—ã–π_–æ—Ä–≥–∞–Ω"]
    
    result = {
        "has_organ_tag": False,
        "clean_message": message,
        "organ_description": "",
        "detected_tag": None
    }
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–µ–≥–æ–≤
    for tag in organ_tags:
        if tag in message.lower():
            result["has_organ_tag"] = True
            result["detected_tag"] = tag
            
            # –£–±–∏—Ä–∞–µ–º —Ç–µ–≥ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
            clean_message = message
            for t in organ_tags:
                clean_message = clean_message.replace(t, "").replace(t.upper(), "")
            
            result["clean_message"] = clean_message.strip()
            result["organ_description"] = clean_message.strip()
            break
    
    return result


def demo():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π"""
    
    test_messages = [
        "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?",
        "#—Å–æ–∑–¥–∞–π_–æ—Ä–≥–∞–Ω –ú–Ω–µ –Ω—É–∂–µ–Ω –æ—Ä–≥–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö",
        "#GROW_ORGAN –°–æ–∑–¥–∞–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤",
        "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ Python #create_organ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Excel —Ñ–∞–π–ª–∞–º–∏",
        "#–Ω–æ–≤—ã–π_–æ—Ä–≥–∞–Ω –ü–∞—Ä—Å–µ—Ä JSON –∏–∑ API —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Å—Ö–µ–º—ã",
    ]
    
    print("=" * 80)
    print("–î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –î–ï–¢–ï–ö–¢–ò–†–û–í–ê–ù–ò–Ø –¢–ï–ì–û–í –°–û–ó–î–ê–ù–ò–Ø –û–†–ì–ê–ù–û–í")
    print("=" * 80)
    
    for i, message in enumerate(test_messages, 1):
        print(f"\n[–¢–µ—Å—Ç {i}]")
        print(f"–°–æ–æ–±—â–µ–Ω–∏–µ: {message}")
        
        result = simulate_organ_detection(message)
        
        if result["has_organ_tag"]:
            print(f"‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω —Ç–µ–≥: {result['detected_tag']}")
            print(f"üìù –û–ø–∏—Å–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∞: {result['organ_description']}")
            print(f"üí¨ –û—á–∏—â–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {result['clean_message']}")
            print("\nüß¨ –î–ï–ô–°–¢–í–ò–Ø:")
            print("  1. –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ create_organ_background()")
            print("  2. –û–±—ã—á–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å Neira –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è")
            print("  3. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π –æ—Ä–≥–∞–Ω")
        else:
            print("‚û°Ô∏è –û–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–∞")
            print(f"üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è Neira: {result['clean_message']}")
    
    print("\n" + "=" * 80)
    print("–û–ñ–ò–î–ê–ï–ú–û–ï –ü–û–í–ï–î–ï–ù–ò–ï –í TELEGRAM:")
    print("=" * 80)
    
    scenario = """
    [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] #—Å–æ–∑–¥–∞–π_–æ—Ä–≥–∞–Ω –ù—É–∂–µ–Ω –æ—Ä–≥–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –ø–æ–≥–æ–¥—ã
    
    [Neira –≤ —á–∞—Ç–µ]
    üîÑ –ù–∞—á–∏–Ω–∞—é –æ–±—Ä–∞–±–æ—Ç–∫—É...
    üîç –ê–Ω–∞–ª–∏–∑...
    üìã –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...
    
    [Neira –æ—Ç–≤–µ—á–∞–µ—Ç]
    –û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è! –ü–æ–≥–æ–¥–Ω—ã–µ API –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã. 
    OpenWeatherMap –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ö–æ—Ä–æ—à–∏–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø...
    
    [–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ —Ñ–æ–Ω–µ]
    üß† –ù–∞—á–∏–Ω–∞—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π –æ—Ä–≥–∞–Ω...
    
    [–ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥]
    ‚úÖ –û—Ä–≥–∞–Ω —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!
    
    üìù –ù–∞–∑–≤–∞–Ω–∏–µ: WeatherApiCell
    üìÑ –§–∞–π–ª: generated/weather_api_cell.py
    üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–≥–æ–¥–Ω—ã–º–∏ API
    
    üí° –Ø –Ω–∞—É—á–∏–ª–∞—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–¥ –¥–ª—è —Å–µ–±—è!
    """
    
    print(scenario)
    
    print("\n" + "=" * 80)
    print("–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö:")
    print("=" * 80)
    print("""
    1. telegram_bot.py
       - –î–µ—Ç–µ–∫—Ç —Ç–µ–≥–æ–≤ –≤ chat_handler()
       - asyncio.create_task(create_organ_background())
       
    2. cell_factory.py
       - CellFactory.create_cell()
       - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
       
    3. generated/
       - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ—Ä–≥–∞–Ω–æ–≤
       
    4. cell_watcher.py
       - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
    
    –ò–¢–û–ì–û: –°–∞–º–æ–æ–±—É—á–∞—é—â–∞—è—Å—è —Å–∏—Å—Ç–µ–º–∞ ‚úÖ
    """)


if __name__ == "__main__":
    demo()
