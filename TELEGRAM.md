# ü§ñ Telegram-–±–æ—Ç Neira (v0.8.3)

–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç Neira –∫ Telegram: –¥–∏–∞–ª–æ–≥, –æ–±—É—á–µ–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, vision/Stable Diffusion.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—á–µ–∫‚Äë–ª–∏—Å—Ç)

- [ ] Python 3.10+
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
  - `pip install -r backend/requirements.txt`
  - `pip install -r requirements-telegram.txt`
- [ ] –°–æ–∑–¥–∞—Ç—å `.env` (–ø–æ –ø—Ä–∏–º–µ—Ä—É `.env.example`) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:
  - `TELEGRAM_BOT_TOKEN=...`
  - `NEIRA_ADMIN_PASSWORD=...` (–Ω–µ `change_me_please`)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å:
  - `python telegram_bot.py`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- `/auth` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ –ø–æ–ø—ã—Ç–∫–∞–º (–∑–∞—â–∏—Ç–∞ –æ—Ç brute force).
- –ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–∞—Ä–æ–ª–µ–º, –Ω–æ Telegram –º–æ–∂–µ—Ç –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç—å ‚Äî —É–¥–∞–ª—è–π –≤—Ä—É—á–Ω—É—é.
- –ó–∞–ø—É—Å–∫ —Å `NEIRA_ADMIN_PASSWORD=change_me_please` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—Ä–µ—â—ë–Ω.
  - –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `NEIRA_ALLOW_DEFAULT_ADMIN_PASSWORD=true` (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–¥–µ).

## üß≠ –†–µ–∂–∏–º—ã –¥–æ—Å—Ç—É–ø–∞

- `open` ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –≤—Å–µ–º
- `whitelist` ‚Äî —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (—á–µ—Ä–µ–∑ `/admin add ...`)
- `admin_only` ‚Äî —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ—Å–Ω–æ–≤–Ω—ã–µ)

- `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω BotFather (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `NEIRA_ADMIN_PASSWORD` ‚Äî –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `NEIRA_ALLOW_DEFAULT_ADMIN_PASSWORD` ‚Äî `true` —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- `NEIRA_TG_ACCESS` ‚Äî `open|whitelist|admin_only` (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω–∞ ‚Äî –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫)
- `NEIRA_TG_CHANNELS` ‚Äî ID –≥—Ä—É–ø–ø/–∫–∞–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –≥–¥–µ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –±–µ–∑ whitelist (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω–∞ ‚Äî –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫)
- `NEIRA_TG_MENTION_ONLY` ‚Äî `true|false`, –æ—Ç–≤–µ—á–∞—Ç—å –≤ –≥—Ä—É–ø–ø–∞—Ö —Ç–æ–ª—å–∫–æ –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ/–æ—Ç–≤–µ—Ç
- `NEIRA_TG_SETTINGS_FILE` ‚Äî –ø—É—Ç—å –∫ JSON —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `neira_tg_settings.json`)

- `NEIRA_TG_AUTH_MAX_ATTEMPTS` ‚Äî –ø–æ–ø—ã—Ç–æ–∫ `/auth` –≤ –æ–∫–Ω–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `5`)
- `NEIRA_TG_AUTH_WINDOW_SECONDS` ‚Äî –æ–∫–Ω–æ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `300`)
- `NEIRA_TG_AUTH_BLOCK_SECONDS` ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `900`)

- `NEIRA_TG_TYPING_THROTTLE_SECONDS` ‚Äî —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ typing (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `3.0`)
- `NEIRA_HTTPX_LOG_LEVEL` ‚Äî —à—É–º–Ω–æ—Å—Ç—å –ª–æ–≥–æ–≤ httpx (`WARNING` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## üìÅ –§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö

- `neira_authorized_users.json` ‚Äî whitelist –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–æ–∑–¥–∞—ë—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `/admin add/remove`)
- `neira_tg_settings.json` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞/–∫–∞–Ω–∞–ª–æ–≤ (—Å–æ–∑–¥–∞—ë—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `/admin mode/addchannel/removechannel/thisgroup`)
- `neira_user_profiles.json` ‚Äî —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`/myname`)

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –µ—Å–ª–∏ `NEIRA_TG_ACCESS` –∏–ª–∏ `NEIRA_TG_CHANNELS` –∑–∞–¥–∞–Ω—ã –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏, –æ–Ω–∏ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ `neira_tg_settings.json`.

## üßæ –ö–æ–º–∞–Ω–¥—ã (–∫–ª—é—á–µ–≤—ã–µ)

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

1) –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–∫–µ):
- `/auth 0 <–ø–∞—Ä–æ–ª—å_–∏–∑_NEIRA_ADMIN_PASSWORD>`

2) –ü–∞–Ω–µ–ª—å:
- `/admin`

3) –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
- `/admin users`
- `/admin add <user_id|@username|t.me/username> [–∑–∞–º–µ—Ç–∫–∞]`
- `/admin remove <user_id|@username|t.me/username>`

4) –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏/–∫–∞–Ω–∞–ª–∞–º–∏:
- `/admin channels`
- `/admin addchannel <chat_id>`
- `/admin removechannel <chat_id>`
- `/admin thisgroup` (–¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é –≥—Ä—É–ø–ø—É/–∫–∞–Ω–∞–ª)
- `/admin mode <open|whitelist|admin_only>`

5) –î–æ—Å—Ç—É–ø –∫ –∫–æ–¥—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω):
- `/code list`
- `/code read <—Ñ–∞–π–ª>` ‚Äî –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Ñ–∞–π–ª –¥–æ–∫—É–º–µ–Ω—Ç–æ–º (–±–µ–∑ Markdown-–∏–Ω—ä–µ–∫—Ü–∏–π –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –¥–ª–∏–Ω–µ —Å–æ–æ–±—â–µ–Ω–∏—è)

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

- `/start`, `/help`
- `/stats`, `/memory`, `/learn ...`, `/learn_auto ...`
- `/imagine ...`, `/vision` (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π)

## üß© –¢–∏–ø–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (edge cases)

- `/auth` –≤ –≥—Ä—É–ø–ø–µ: –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è, –±–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.
- –ù–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ –≥—Ä—É–ø–ø–µ: –ø—Ä–æ–≤–µ—Ä—å `NEIRA_TG_MENTION_ONLY` –∏ —á—Ç–æ –≥—Ä—É–ø–ø–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ `/admin thisgroup` –∏–ª–∏ `NEIRA_TG_CHANNELS`.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ¬´–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è¬ª: –µ—Å–ª–∏ `NEIRA_TG_ACCESS/NEIRA_TG_CHANNELS` –∑–∞–¥–∞–Ω—ã –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏, –æ–Ω–∏ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç `neira_tg_settings.json`.
