@echo off
REM –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ Neira —Å —É–¥–∞–ª—ë–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
REM –¢—Ä–µ–±—É–µ—Ç—Å—è ngrok

echo ============================================================
echo   NEIRA Secure Remote Access
echo ============================================================
echo.

REM –í–∫–ª—é—á–∞–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
set NEIRA_AUTH_ENABLED=true

echo ============================================================
echo   –ó–ê–©–ò–¢–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê
echo ============================================================
echo.
echo   –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û:
echo   –õ–æ–≥–∏–Ω: 0
echo   –ü–∞—Ä–æ–ª—å: 11111111 (8 –µ–¥–∏–Ω–∏—Ü = –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∏—Ç–∞)
echo.
echo   –≠—Ç–æ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω—ë–Ω!
echo ============================================================
echo.

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º ngrok
where ngrok >nul 2>&1
if errorlevel 1 (
    echo ‚ùå ngrok –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
    echo.
    echo –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ngrok:
    echo   1. –°–∫–∞—á–∞–π: https://ngrok.com/download
    echo   2. –†–∞—Å–ø–∞–∫—É–π –∏ –¥–æ–±–∞–≤—å –≤ PATH
    echo   3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –∏ –¥–æ–±–∞–≤—å —Ç–æ–∫–µ–Ω:
    echo      ngrok config add-authtoken YOUR_TOKEN
    echo.
    pause
    exit /b 1
)

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º Ollama
echo [1/4] –ü—Ä–æ–≤–µ—Ä–∫–∞ Ollama...
curl -s http://localhost:11434/api/tags >nul 2>&1
if errorlevel 1 (
    echo ‚ö†Ô∏è  –ó–∞–ø—É—Å–∫–∞—é Ollama...
    start "" ollama serve
    timeout /t 3 >nul
)
echo ‚úÖ Ollama

REM –ó–∞–ø—É—Å–∫–∞–µ–º backend —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
echo [2/4] –ó–∞–ø—É—Å–∫ Backend —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π...
cd backend
start "Neira Backend" cmd /k "set NEIRA_AUTH_ENABLED=true && set NEIRA_USERNAME=neira && set NEIRA_PASSWORD=%NEIRA_PASSWORD% && python api.py"
cd ..
timeout /t 4 >nul
echo ‚úÖ Backend

REM –ó–∞–ø—É—Å–∫–∞–µ–º ngrok
echo [3/4] –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è ngrok...
start "ngrok" cmd /k ngrok http 8000 --request-header-add "ngrok-skip-browser-warning:true"
timeout /t 5 >nul

REM –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
echo.
echo ============================================================
echo   ‚úÖ NEIRA –î–û–°–¢–£–ü–ù–ê –£–î–ê–õ–Å–ù–ù–û –ò –ó–ê–©–ò–©–ï–ù–ê!
echo ============================================================
echo.
echo   üì° –õ–æ–∫–∞–ª—å–Ω–æ:     http://localhost:8000
echo   üåê –ü—É–±–ª–∏—á–Ω—ã–π URL: —Å–º. –æ–∫–Ω–æ ngrok –∏–ª–∏ http://localhost:4040
echo.
echo   üîê –î–ê–ù–ù–´–ï –î–õ–Ø –í–•–û–î–ê:
echo      –õ–æ–≥–∏–Ω:  %NEIRA_USERNAME%
echo      –ü–∞—Ä–æ–ª—å: %NEIRA_PASSWORD%
echo.
echo   üì± –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞/–¥—Ä—É–≥–æ–≥–æ –ü–ö:
echo      1. –û—Ç–∫—Ä–æ–π –ø—É–±–ª–∏—á–Ω—ã–π URL –∏–∑ ngrok
echo      2. –í–≤–µ–¥–∏ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
echo      3. –ò—Å–ø–æ–ª—å–∑—É–π /docs –¥–ª—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
echo.
echo   ‚ö†Ô∏è  –í–ê–ñ–ù–û: –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π –ø–∞—Ä–æ–ª—å —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º!
echo ============================================================
echo.
pause
