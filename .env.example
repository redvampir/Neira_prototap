# Пример конфигурации для Telegram-бота Neira
TELEGRAM_BOT_TOKEN=замените-на-свой-токен

# Пароль администратора (ОБЯЗАТЕЛЬНО измените!)
# Используется для команд /admin, /code и других привилегированных операций
NEIRA_ADMIN_PASSWORD=create_strong_password_here

# --- (Опционально) Сеть/таймауты Telegram ---
# Если Telegram API недоступен напрямую, можно указать прокси:
# NEIRA_TG_PROXY_URL=http://127.0.0.1:8080
# NEIRA_TG_PROXY_URL=socks5://127.0.0.1:9050
#
# Кастомный Bot API base URL (например локальный Telegram Bot API server):
# NEIRA_TG_BASE_URL=http://127.0.0.1:8081
#
# Таймауты (секунды)
# NEIRA_TG_CONNECT_TIMEOUT=15
# NEIRA_TG_READ_TIMEOUT=30
# NEIRA_TG_WRITE_TIMEOUT=30
# NEIRA_TG_POOL_TIMEOUT=30
# 
# Файл лога Telegram-бота (по умолчанию artifacts/telegram_bot.log)
# NEIRA_TG_LOG_FILE=artifacts/telegram_bot.log
# 
# Ограничение длины ответов в Telegram (0 = без ограничений)
# NEIRA_TG_RESPONSE_MAX_CHARS=0
# Отключить шаблонные/фрагментные ответы Cortex (fallback на legacy)
# NEIRA_TG_DISABLE_TEMPLATES=false
#
# Ретраи при старте (bot.get_me/initialize). -1 = бесконечно, 0 = без ретраев
# NEIRA_TG_STARTUP_RETRIES=-1
# NEIRA_TG_STARTUP_BACKOFF_BASE_SECONDS=2.0
# NEIRA_TG_STARTUP_BACKOFF_MAX_SECONDS=60.0

# --- Настройки контекста и генерации ---
# Максимальный размер окна контекста (в токенах) для LLM
# NEIRA_CONTEXT_MAX_TOKENS=8000

# Резерв токенов для ответа (влияет на доступный контекст)
# NEIRA_CONTEXT_RESERVED_TOKENS=2000

# Максимум токенов ответа для большинства задач
# NEIRA_MAX_RESPONSE_TOKENS=2048

# Максимум токенов для задач генерации кода
# NEIRA_CODE_MAX_TOKENS=4096

# Пауза после ошибки LLM (секунды)
# NEIRA_LLM_FAILURE_COOLDOWN_SEC=180

# Максимум токенов для Cortex
# NEIRA_CORTEX_MAX_TOKENS=1024

# Контекстное окно Ollama (num_ctx)
# NEIRA_OLLAMA_NUM_CTX=32768

# === LLM ПРОВАЙДЕРЫ ===
# Порядок приоритета: lmstudio → ollama → groq → openai → claude
LLM_PROVIDER_PRIORITY=lmstudio,ollama,groq,openai,claude
NEIRA_DISABLE_OLLAMA=true

# === LM STUDIO (рекомендуемый) ===
# Запустите LM Studio → загрузите модель → Local Server → Start Server
NEIRA_LMSTUDIO_URL=http://localhost:1234/v1/chat/completions
NEIRA_LMSTUDIO_MODEL=qwen/qwen2.5-coder-14b

# === OLLAMA (резервный) ===
NEIRA_OLLAMA_MODEL=nemotron-mini
# Модель для генерации спецификаций органов/клеток (по умолчанию MODEL_REASON)
# NEIRA_ORGAN_SPEC_MODEL=neira-cell-router:latest

# === ЗАВИСИМОСТИ ОРГАНОВ ===
# Разрешённые pip-пакеты для автоустановки (через запятую)
# NEIRA_ORGAN_DEP_ALLOWLIST=faster-whisper,ctranslate2,tokenizers,huggingface-hub,numpy,soundfile,pydub,pypdf,aiohttp,beautifulsoup4,lxml,youtube-transcript-api,duckduckgo-search,python-docx,pillow,requests
# Таймаут установки зависимостей (секунды)
# NEIRA_ORGAN_DEP_INSTALL_TIMEOUT=600
# Лимит вывода установщика (символы)
# NEIRA_ORGAN_DEP_INSTALL_OUTPUT_LIMIT=800

# === ТКП (docx генерация) ===
# Текст для пропусков в таблицах
# NEIRA_TKP_MISSING_VALUE_TEXT=Требуется уточнение
# Длина сниппета вокруг модели (символы)
# NEIRA_TKP_SNIPPET_CHARS=600
# Окно поиска значения параметра (символы)
# NEIRA_TKP_VALUE_WINDOW_CHARS=180
# Лимит строк в списках (узлы/опции/комплектация)
# NEIRA_TKP_LIST_LIMIT=8
# Количество абзацев во вступлении и "О компании"
# NEIRA_TKP_INTRO_PARAGRAPH_LIMIT=2
# NEIRA_TKP_COMPANY_PARAGRAPH_LIMIT=5
# Окно страниц вокруг упоминания модели
# NEIRA_TKP_PARSE_PAGE_WINDOW=1
# Страниц взять, если модель не найдена
# NEIRA_TKP_PARSE_FALLBACK_PAGES=2
# Минимальный скор для fuzzy-сопоставления параметров
# NEIRA_TKP_PARAM_MATCH_MIN_SCORE=0.62
# Версия схемы JSON парсинга
# NEIRA_TKP_PARSED_SCHEMA_VERSION=3

# === LLAMA.CPP SERVER (альтернатива) ===
NEIRA_LLAMACPP_URL=http://localhost:8080/v1/chat/completions
NEIRA_LLAMACPP_MODEL=local-model

# === НАСТРОЙКИ КОНТЕКСТА ===
# Соответствует настройкам LM Studio (8192 токенов)
NEIRA_CONTEXT_MAX_TOKENS=8000
NEIRA_CONTEXT_RESERVED_TOKENS=2000
NEIRA_MAX_RESPONSE_TOKENS=2048
NEIRA_CODE_MAX_TOKENS=4096
NEIRA_CORTEX_MAX_TOKENS=1024

# === ЛОКАЛЬНЫЕ ЭМБЕДДИНГИ ===
NEIRA_LOCAL_EMBEDDINGS=true
NEIRA_LOCAL_EMBED_DIM=384
NEIRA_LOCAL_EMBED_MIN_NGRAM=3
NEIRA_LOCAL_EMBED_MAX_NGRAM=5
NEIRA_LOCAL_EMBED_MAX_NGRAMS=8000
NEIRA_LOCAL_EMBED_MAX_TEXT_CHARS=20000

# === FAST_CHAT РЕЖИМ (оптимизация для разговоров) ===
# Включает облегчённый режим: пропускает планирование, верификацию, извлечение фактов
# Результат: ~2 LLM вызова вместо 5+ для задач типа "разговор" и "вопрос"
NEIRA_FAST_CHAT=true
# Типы задач для FAST_CHAT (через запятую)
NEIRA_FAST_CHAT_TYPES=разговор,вопрос
# Что пропускать в FAST_CHAT режиме
NEIRA_FAST_CHAT_SKIP_PLANNING=true
NEIRA_FAST_CHAT_SKIP_VERIFY=true
NEIRA_FAST_CHAT_SKIP_FACTS=true
# Количество ретраев (0 = без ретраев для скорости)
NEIRA_FAST_CHAT_MAX_RETRIES=0

# === КАЧЕСТВО ВЕРИФИКАЦИИ ===
# Минимальный балл для принятия ответа (8 = строго, 6 = мягче)
# При 8 верификатор часто отклоняет хорошие ответы и добавляет LLM вызовы
NEIRA_MIN_ACCEPTABLE_SCORE=6
