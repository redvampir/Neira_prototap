name: "–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Python –∫–æ–¥–∞"
description: "–û–±—É—á–µ–Ω–∏–µ –ù–µ–π—Ä—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å Python –∫–æ–¥ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∏ –±–µ–∑ –æ—à–∏–±–æ–∫ Pylance"
difficulty: medium
estimated_time: 30

metadata:
  category: code_generation
  language: python
  version: "1.0"
  tags: ["code", "python", "types", "quality"]

phases:
  - name: setup
    description: "–ò–∑—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤ Python —Ç–∏–ø–∏–∑–∞—Ü–∏–∏"
    duration: 5
    steps:
      - action: teach
        content: |
          üìö –û–°–ù–û–í–´ –ö–ê–ß–ï–°–¢–í–ï–ù–ù–û–ì–û PYTHON –ö–û–î–ê
          
          1. –¢–ò–ü–´ –î–ê–ù–ù–´–•:
             - –ò—Å–ø–æ–ª—å–∑—É–π Optional[Type] –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å None
             - –ü–†–ê–í–ò–õ–¨–ù–û: def foo(x: Optional[str] = None) -> str:
             - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: def foo(x: str = None) -> str:
          
          2. –ü–†–û–í–ï–†–ö–ò –ù–ê None:
             - –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏—Ö –º–µ—Ç–æ–¥–æ–≤
             - –ü–†–ê–í–ò–õ–¨–ù–û:
               if my_var is not None:
                   result = my_var.upper()
             - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
               result = my_var.upper()  # –º–æ–∂–µ—Ç –±—ã—Ç—å None!
          
          3. –ò–ú–ü–û–†–¢–´:
             - –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
             - from typing import Optional, List, Dict
             - from dataclasses import dataclass
          
          4. DOCSTRINGS:
             - –ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
             - –§–æ—Ä–º–∞—Ç: """–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ\n\nArgs:\n    param: –æ–ø–∏—Å–∞–Ω–∏–µ\n\nReturns:\n    –æ–ø–∏—Å–∞–Ω–∏–µ"""
        
      - action: show_examples
        content: |
          ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–´–ï –ü–†–ò–ú–ï–†–´:
          
          ```python
          from typing import Optional, List
          
          def process_text(text: Optional[str] = None) -> str:
              """
              –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
              
              Args:
                  text: –¢–µ–∫—Å—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å None)
              
              Returns:
                  –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
              """
              if text is None:
                  return ""
              
              return text.strip().upper()
          
          def find_items(items: List[str], query: str) -> Optional[List[str]]:
              """
              –ü–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
              
              Args:
                  items: –°–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                  query: –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
              
              Returns:
                  –ù–∞–π–¥–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–ª–∏ None
              """
              if not items:
                  return None
              
              result = [item for item in items if query in item]
              return result if result else None
          ```
          
          ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ï –ü–†–ò–ú–ï–†–´:
          
          ```python
          # –ù–µ—Ç —Ç–∏–ø–æ–≤
          def process_text(text=None):
              return text.upper()  # –û—à–∏–±–∫–∞ –µ—Å–ª–∏ text=None!
          
          # –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è None
          def find_items(items: List[str] = None):  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å Optional[List[str]]
              return items[0]  # –û—à–∏–±–∫–∞ –µ—Å–ª–∏ items=None!
          ```

  - name: execution
    description: "–ü—Ä–∞–∫—Ç–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞"
    duration: 15
    steps:
      - action: task
        task_type: code_generation
        content: |
          –ó–ê–î–ê–ù–ò–ï 1: –°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–∏—Å–∫–æ–º
          
          –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
          1. –§—É–Ω–∫—Ü–∏—è get_first_element
          2. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ (–º–æ–∂–µ—Ç –±—ã—Ç—å None)
          3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–ª–∏ None
          4. –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ (Optional, List)
          5. –° –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ None
          6. –° docstring
        
        expected_patterns:
          - "from typing import"
          - "Optional"
          - "List"
          - "if.*is None"
          - '"""'
          - "Args:"
          - "Returns:"
        
        validation_rules:
          - no_none_errors: "–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ —Å None"
          - has_type_hints: "–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤"
          - has_docstring: "–î–æ–ª–∂–µ–Ω –±—ã—Ç—å docstring"
          - has_imports: "–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç—ã"
      
      - action: task
        task_type: code_generation
        content: |
          –ó–ê–î–ê–ù–ò–ï 2: –°–æ–∑–¥–∞–π –∫–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
          
          –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
          1. –ö–ª–∞—Å—Å UserProfile —Å dataclass
          2. –ü–æ–ª—è: name (str), age (int), email (Optional[str])
          3. –ú–µ—Ç–æ–¥ get_info() -> str
          4. –° –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ None –¥–ª—è email
          5. –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏
          6. –° docstrings
        
        expected_patterns:
          - "from dataclasses import dataclass"
          - "from typing import Optional"
          - "@dataclass"
          - "class UserProfile:"
          - "email: Optional[str]"
          - "if self.email is not None"
        
        validation_rules:
          - has_dataclass: "–î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @dataclass"
          - correct_types: "–¢–∏–ø—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏"
          - none_safe: "–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å None"

  - name: validation
    description: "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞"
    duration: 5
    steps:
      - action: validate
        validation_type: pylance_check
        content: |
          –ü–†–û–í–ï–†–ö–ê –ö–û–î–ê:
          
          1. –ó–∞–ø—É—Å—Ç–∏ Pylance –Ω–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–¥–µ
          2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ —Ç–∏–ø–æ–≤
          3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
          4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –µ—Å—Ç—å docstrings
        
        success_criteria:
          - "0 –æ—à–∏–±–æ–∫ Pylance"
          - "–í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ"
          - "–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å docstrings"
          - "–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ Optional —Ç–∏–ø—ã"

  - name: feedback
    description: "–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –∏ —É–ª—É—á—à–µ–Ω–∏–µ"
    duration: 5
    steps:
      - action: review
        content: |
          –°–ê–ú–û–ü–†–û–í–ï–†–ö–ê:
          
          –û—Ü–µ–Ω–∏ —Å–≤–æ–π –∫–æ–¥ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º:
          1. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã (Optional –¥–ª—è None)
          2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ None –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
          3. ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
          4. ‚úÖ Docstrings –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤
          5. ‚úÖ 0 –æ—à–∏–±–æ–∫ Pylance
        
      - action: learn
        content: |
          –ó–ê–ü–û–ú–ù–ò –ü–†–ê–í–ò–õ–ê:
          
          1. –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π Optional[T] –¥–ª—è None –∑–Ω–∞—á–µ–Ω–∏–π
          2. –í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π –Ω–∞ None –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –º–µ—Ç–æ–¥–æ–≤
          3. –í–°–ï–ì–î–ê –¥–æ–±–∞–≤–ª—è–π –∏–º–ø–æ—Ä—Ç—ã –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
          4. –í–°–ï–ì–î–ê –ø–∏—à–∏ docstrings
          5. –í–°–ï–ì–î–ê —Ç–µ—Å—Ç–∏—Ä—É–π –∫–æ–¥ —á–µ—Ä–µ–∑ Pylance
          
          –≠—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ - –æ—Å–Ω–æ–≤–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ Python –∫–æ–¥–∞!

success_criteria:
  min_score: 0.8
  required_completions:
    - "–í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã"
    - "–ö–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç Pylance –±–µ–∑ –æ—à–∏–±–æ–∫"
    - "–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã"
  
  quality_metrics:
    - name: "–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤"
      weight: 0.4
      check: "has_correct_types"
    
    - name: "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å None"
      weight: 0.3
      check: "has_none_checks"
    
    - name: "–ü–æ–ª–Ω–æ—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
      weight: 0.2
      check: "has_complete_docs"
    
    - name: "–ß–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞"
      weight: 0.1
      check: "no_pylance_errors"

rewards:
  on_success:
    - pathway: "python_code_quality_expert"
      tier: "WARM"
      confidence: 0.9
    
    - template: "python_typed_function"
      success_count: +5
    
    - experience: +100
      category: "code_generation"

next_scenarios:
  - "advanced_python_patterns.yaml"
  - "async_code_generation.yaml"
  - "error_handling_best_practices.yaml"
