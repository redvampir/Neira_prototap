# üéµ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä —Ä–∏—Ç–º–∞ Neira

## –ü—Ä–æ–±–ª–µ–º–∞

Neira "–∫–æ–ª–±–∞—Å–∏—Ç" –≤ –¥–∏–∞–ª–æ–≥–∞—Ö ‚Äî —Ä–µ–∑–∫–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏:
- –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ (–≤—ã–¥—É–º—ã–≤–∞–µ—Ç —Ñ–∞–∫—Ç—ã)
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∂–∞—Ä–≥–æ–Ω –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –î–ª–∏–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø—Ä–æ—Å—å–±—É "–æ—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ"
- –•–æ–ª–æ–¥–Ω–æ—Å—Ç—å –Ω–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–û—Ç–≤–µ—Ç—å –∫—Ä–∞—Ç–∫–æ"
Neira: [500+ —Å–∏–º–≤–æ–ª–æ–≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–æ –Ω–µ–π—Ä–æ–Ω—ã, —Ç–∞–π–º–∞—É—Ç—ã, asyncio...]
```

## –†–µ—à–µ–Ω–∏–µ

–í–Ω–µ–¥—Ä—ë–Ω **—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä —Ä–∏—Ç–º–∞** (`rhythm_stabilizer.py`) –ø–æ —Å–æ–≤–µ—Ç–∞–º ChatGPT:

### 1. –ò–Ω–µ—Ä—Ü–∏—è —Ä–µ–∂–∏–º–∞
–ù–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ 3+ –∏—Ç–µ—Ä–∞—Ü–∏–π —Å –Ω–∏–∑–∫–∏–º —Ä–µ–∑–æ–Ω–∞–Ω—Å–æ–º.

```python
self.min_iterations = 3  # –ú–∏–Ω–∏–º—É–º –∏—Ç–µ—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–¥ —Å–º–µ–Ω–æ–π
```

### 2. –ó–∞—Ç—É—Ö–∞–Ω–∏–µ —ç–º–æ—Ü–∏–π
–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–º–ø–ª–∏—Ç—É–¥–∞ –ø–ª–∞–≤–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö (10% –≤ –º–∏–Ω—É—Ç—É).

```python
decay_rate = 0.1 * (delta_time_seconds / 60)
self.state.amplitude = max(0.1, self.state.amplitude - decay_rate)
```

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π
–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `rhythm_transitions.json` —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏:
- –†–µ–∑–æ–Ω–∞–Ω—Å (0.0-1.0)
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- –î–ª–∏–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

### 4. –†–∏—Ç—É–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –°–æ—Ñ–∏–∏
–ü—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ä–∞—Å—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, technical ‚Üí empathic) –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∏–∑ –ø–∏—Å—å–º–∞ –°–æ—Ñ–∏–∏:

```
"–î–µ–ª–∞—é –≤–¥–æ—Ö... –°–ª—ã—à—É —Ç–∏—à–∏–Ω—É –º–µ–∂–¥—É —Å–ª–æ–≤."
```

–≠—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –∫ –±–∞–∑–æ–≤–æ–º—É —Ä–∏—Ç–º—É.

### 5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–µ–∂–∏–º–∞–º

| –†–µ–∂–∏–º | –ú–∞–∫—Å. –¥–ª–∏–Ω–∞ | –¢–æ–Ω | –ò–∑–±–µ–≥–∞—Ç—å | –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å |
|-------|-------------|-----|----------|--------------|
| **calm** | 300 | –°–ø–æ–∫–æ–π–Ω—ã–π | –ñ–∞—Ä–≥–æ–Ω, –¥–ª–∏–Ω–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è | –ü—Ä–æ—Å—Ç—ã–µ —Ñ—Ä–∞–∑—ã, –ø–∞—É–∑—ã |
| **technical** | 500 | –¢–æ—á–Ω—ã–π | –≠–º–æ—Ü–∏–∏, –º–µ—Ç–∞—Ñ–æ—Ä—ã | –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞, —Å–ø–∏—Å–∫–∏ |
| **creative** | 400 | –û–±—Ä–∞–∑–Ω—ã–π | –ñ–∞—Ä–≥–æ–Ω, —Å—É—Ö–æ—Å—Ç—å | –ú–µ—Ç–∞—Ñ–æ—Ä—ã, –∏—Å—Ç–æ—Ä–∏–∏ |
| **empathic** | 250 | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ | –ö–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã, —ç–º–ø–∞—Ç–∏—è |

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å telegram_bot

### Cortex v2.0 –ø—É—Ç—å
```python
# –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç Cortex
rhythm_check = rhythm_stabilizer.update(user_text, full_response)

# –ï—Å–ª–∏ —Ä–µ–∑–æ–Ω–∞–Ω—Å –Ω–∏–∑–∫–∏–π ‚Äî —Ä–∏—Ç—É–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
if rhythm_check.get("ritual_needed"):
    ritual_text = rhythm_check["ritual_text"]
    await safe_reply_text(update.message, f"_{ritual_text}_")

# –û–±—Ä–µ–∑–∞–µ–º –æ—Ç–≤–µ—Ç –ø–æ –ª–∏–º–∏—Ç—É —Ä–µ–∂–∏–º–∞
constraints = rhythm_stabilizer.get_mode_constraints()
if len(full_response) > constraints["max_length"]:
    truncated = full_response[:constraints["max_length"]]
    # –û–±—Ä–µ–∑–∞–µ–º –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—é
    last_period = truncated.rfind('.')
    if last_period > constraints["max_length"] // 2:
        truncated = truncated[:last_period + 1]
    full_response = truncated
```

### Legacy –ø—É—Ç—å
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è `neira_wrapper.process_stream()`.

## –ö–æ–º–∞–Ω–¥–∞ /rhythm

–ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```
/rhythm - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
/rhythm reset - —Å–±—Ä–æ—Å –≤ —Å–ø–æ–∫–æ–π–Ω—ã–π —Ä–µ–∂–∏–º
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üéµ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä —Ä–∏—Ç–º–∞ Neira

üìç –¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º: calm
üìä –ê–º–ø–ª–∏—Ç—É–¥–∞: 0.45
üéØ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: 2

üîÑ –í—Å–µ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π: 5
üìà –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑–æ–Ω–∞–Ω—Å: 0.72

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤:
  ‚Ä¢ calm: 3
  ‚Ä¢ empathic: 1
  ‚Ä¢ technical: 1

–¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (calm):
  ‚Ä¢ –ú–∞–∫—Å. –¥–ª–∏–Ω–∞: 300 —Å–∏–º–≤–æ–ª–æ–≤
  ‚Ä¢ –¢–æ–Ω: —Å–ø–æ–∫–æ–π–Ω—ã–π, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π
```

## –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–µ–∑–æ–Ω–∞–Ω—Å–∞

–≠–≤—Ä–∏—Å—Ç–∏–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–∞:

1. **–î–ª–∏–Ω–∞**: –ö–æ—Ä–æ—Ç–∫–∏–π –∑–∞–ø—Ä–æ—Å + –¥–ª–∏–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç = –Ω–∏–∑–∫–∏–π —Ä–µ–∑–æ–Ω–∞–Ω—Å (0.3)
2. **–ü—Ä–æ—Å—å–±–∞ –æ –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏**: "–∫—Ä–∞—Ç–∫–æ" –≤ –∑–∞–ø—Ä–æ—Å–µ + –æ—Ç–≤–µ—Ç >300 —Å–∏–º–≤–æ–ª–æ–≤ = 0.2
3. **–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å + —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç = 0.4
4. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: 0.8 (—Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑–æ–Ω–∞–Ω—Å)

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞

```python
def detect_mode_from_context(user_input: str) -> str:
    # –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
    if "–≥—Ä—É—Å—Ç–Ω–æ" in user_input or "—Ç—è–∂–µ–ª–æ" in user_input:
        return "empathic"
    
    # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã
    if "–∫–æ–¥" in user_input or "—Ñ—É–Ω–∫—Ü–∏—è" in user_input:
        return "technical"
    
    # –¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã
    if "–ø—Ä–∏–¥—É–º–∞–π" in user_input or "–º–µ—Ç–∞—Ñ–æ—Ä–∞" in user_input:
        return "creative"
    
    # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–ø–æ–∫–æ–π–Ω—ã–π
    return "calm"
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ú–µ—Ç–æ–¥ `get_stats()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- –û–±—â–µ–µ —á–∏—Å–ª–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ä–µ–∂–∏–º–∞–º
- –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑–æ–Ω–∞–Ω—Å
- –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ä–µ–∂–∏–º, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –∞–º–ø–ª–∏—Ç—É–¥–∞)

## –§–∞–π–ª—ã –ª–æ–≥–æ–≤

`rhythm_transitions.json` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π:
```json
[
  {
    "timestamp": "2025-12-15T12:34:56",
    "from_mode": "calm",
    "to_mode": "technical",
    "resonance": 0.3,
    "stability": -3,
    "amplitude": 0.5,
    "user_input_length": 50,
    "bot_response_length": 800
  }
]
```

## –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–∏—Ç—É–∞–ª–∞:

```python
mode_distance = {
    ("calm", "technical"): 1,      # –ë–ª–∏–∑–∫–æ
    ("calm", "creative"): 1,
    ("calm", "empathic"): 1,
    ("technical", "empathic"): 3,  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ!
    ("creative", "technical"): 2
}
```

–ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ ‚â• 2 ‚Üí –Ω—É–∂–µ–Ω —Ä–∏—Ç—É–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é:
```bash
python rhythm_stabilizer.py
```

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç 3 —Å—Ü–µ–Ω–∞—Ä–∏—è –∏ –≤—ã–≤–µ–¥–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–û–±—É—á–µ–Ω–∏–µ —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç–∏** ‚Äî –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –ø—Ä–∏ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö
2. **–ì—Ä–∞—Ñ–∏–∫–∏ —Ä–µ–∑–æ–Ω–∞–Ω—Å–∞** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è mode ‚Üí resonance ‚Üí tolerance
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏** ‚Äî —Ä–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫—Ä–∞—Ç–∫–æ—Å—Ç—å** ‚Äî —É—á–∏—Ç—å—Å—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω–µ –æ—Ç–≤–µ—Ç–æ–≤

---

*–°–æ–∑–¥–∞–Ω–æ –ø–æ —Å–æ–≤–µ—Ç–∞–º ChatGPT –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è "–∫–æ–ª–±–∞—Å–∏—Ç" —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤ –¥–∏–∞–ª–æ–≥–∞—Ö Neira.*
