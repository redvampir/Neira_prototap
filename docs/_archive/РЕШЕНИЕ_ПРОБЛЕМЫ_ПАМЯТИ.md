# üö® –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´: Neira –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
```
{"error":"memory layout cannot be allocated"}
```
Ollama –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å –≤ VRAM (–≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞).

## ‚úÖ –†–µ—à–µ–Ω–∏—è (–æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–º—É)

### 1Ô∏è‚É£ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–µ–Ω—å—à—É—é –º–æ–¥–µ–ª—å

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama
taskkill /f /im ollama.exe

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Qwen 0.5B (–æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∞—è, ~500MB)
ollama pull qwen2.5:0.5b

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Ollama
ollama serve
```

–ó–∞—Ç–µ–º –≤ `cells.py` –∏–∑–º–µ–Ω–∏:
```python
MODEL_REASON = "qwen2.5:0.5b"  # –ë—ã–ª–æ: ministral-3:3b
```

### 2Ô∏è‚É£ –°–†–ï–î–ù–ò–ô –í–ê–†–ò–ê–ù–¢: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CPU (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)

**Windows PowerShell:**
```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
$env:OLLAMA_NUM_GPU = "0"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Ollama
Stop-Process -Name ollama -Force
Start-Sleep -Seconds 2
Start-Process ollama -ArgumentList "serve"
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
1. Win+R ‚Üí `sysdm.cpl` ‚Üí –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã
2. –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `OLLAMA_NUM_GPU` = `0`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä

### 3Ô∏è‚É£ –û–ü–¢–ò–ú–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï: –û—Å–≤–æ–±–æ–¥–∏—Ç—å VRAM

```bash
# –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ GPU:
# - –ë—Ä–∞—É–∑–µ—Ä—ã —Å –≤–∏–¥–µ–æ/–∏–≥—Ä–∞–º–∏
# - –î—Ä—É–≥–∏–µ AI –º–æ–¥–µ–ª–∏
# - –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–Ω—è—Ç–æ—Å—Ç—å GPU:
nvidia-smi  # –ò–ª–∏ —á–µ—Ä–µ–∑ –î–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á ‚Üí –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Üí GPU
```

### 4Ô∏è‚É£ –ü–†–û–î–í–ò–ù–£–¢–û–ï: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ModelManager

–í `cells.py` –Ω–∞—Å—Ç—Ä–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤—ã–≥—Ä—É–∑–∫—É:

```python
# –í—ã–≥—Ä—É–∂–∞—Ç—å –º–æ–¥–µ–ª–∏ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
from model_manager import ModelManager
manager = ModelManager(keep_loaded=False)  # –ë—ã–ª–æ: True
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:**
```bash
curl http://localhost:11434/api/ps
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:**
```bash
ollama list
```

**–¢–µ—Å—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏:**
```bash
ollama pull qwen2.5:0.5b
ollama run qwen2.5:0.5b "–ü—Ä–∏–≤–µ—Ç!"
```

## üìä –†–∞–∑–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä | VRAM –Ω—É–∂–Ω–æ | –°–∫–æ—Ä–æ—Å—Ç—å |
|--------|--------|------------|----------|
| qwen2.5:0.5b | 500MB | ~1GB | ‚ö°‚ö°‚ö° |
| qwen2.5:1.5b | 1.5GB | ~2GB | ‚ö°‚ö° |
| ministral-3:3b | 3GB | ~4GB | ‚ö° |
| qwen2.5-coder:7b | 4.7GB | ~6GB | üêå |

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–î–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ **4GB VRAM**:
1. –£—Å—Ç–∞–Ω–æ–≤–∏ `qwen2.5:0.5b` –¥–ª—è —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
2. –û—Å—Ç–∞–≤—å `qwen2.5-coder:7b` —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–¥–∞ (—Ä–µ–¥–∫–æ)
3. –ù–∞—Å—Ç—Ä–æ–π `ModelManager(keep_loaded=False)`

## üõ†Ô∏è –¢–µ–∫—É—â–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ

–Ø —É–∂–µ –¥–æ–±–∞–≤–∏–ª:
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–∫–∏ HTTP 500 –æ—Ç Ollama
- ‚úÖ –ó–∞—â–∏—Ç—É –æ—Ç –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ Fallback —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–∞–º—è—Ç–∏

–¢–µ–ø–µ—Ä—å Neira –±—É–¥–µ—Ç —Å–æ–æ–±—â–∞—Ç—å –∫–æ–≥–¥–∞ Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤–º–µ—Å—Ç–æ –º–æ–ª—á–∞–Ω–∏—è.
