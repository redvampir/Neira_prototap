# ü§ñ Telegram-–±–æ—Ç Neira

> –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Neira

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞](#-–∫–æ–º–∞–Ω–¥—ã-–±–æ—Ç–∞)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–†–µ–∂–∏–º—ã –¥–æ—Å—Ç—É–ø–∞](#-—Ä–µ–∂–∏–º—ã-–¥–æ—Å—Ç—É–ø–∞)
- [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#-—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ß–µ–∫-–ª–∏—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- [ ] Python 3.10+
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
  ```bash
  pip install -r requirements-telegram.txt
  ```
- [ ] –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ –≤ [@BotFather](https://t.me/BotFather):
  1. –û—Ç–ø—Ä–∞–≤—å `/newbot`
  2. –í–≤–µ–¥–∏ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `–ù–µ–π—Ä–∞`)
  3. –í–≤–µ–¥–∏ username (–Ω–∞–ø—Ä–∏–º–µ—Ä: `Neira_assistant_bot`)
  4. –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env`:
  ```env
  TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
  NEIRA_ADMIN_PASSWORD=–Ω–∞–¥—ë–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å
  ```
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å:
  ```bash
  python telegram_bot.py
  ```
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ –±–æ—Ç–µ:
  ```
  /auth 0 –≤–∞—à_–ø–∞—Ä–æ–ª—å
  ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
python check_bot_status.py                    # –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
python tools/check_telegram_connectivity.py  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏
```

---

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º |
| `/myname <–∏–º—è>` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤–æ—ë –∏–º—è |
| `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞ |
| `/memory` | –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏ |
| `/context` | –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ |
| `/clear_context` | –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —á–∞—Ç–∞ |
| `/rhythm` | –°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è |
| `/imagine <–ø—Ä–æ–º–ø—Ç>` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| `/vision` | –°—Ç–∞—Ç—É—Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/auth 0 <–ø–∞—Ä–æ–ª—å>` | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–∫–µ!) |
| `/admin` | –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| `/admin users` | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `/admin add <user_id>` | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/admin remove <user_id>` | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/admin mode <—Ä–µ–∂–∏–º>` | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º –¥–æ—Å—Ç—É–ø–∞ |
| `/admin thisgroup` | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é –≥—Ä—É–ø–ø—É |
| `/cortex` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Cortex v2.0 |
| `/code list` | –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∫–æ–¥–∞ |
| `/code read <—Ñ–∞–π–ª>` | –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª |
| `/learn <—Ç–µ–º–∞\|URL>` | –û–±—É—á–µ–Ω–∏–µ –ø–æ —Ç–µ–º–µ |
| `/self` | –°–∞–º–æ–∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã |
| `/organs` | –°—Ç–∞—Ç—É—Å –æ—Ä–≥–∞–Ω–æ–≤ |
| `/clear` | –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏ ‚ö†Ô∏è |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –≤ BotFather

1. –û—Ç–∫—Ä–æ–π [@BotFather](https://t.me/BotFather)
2. `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏ –±–æ—Ç–∞ ‚Üí `Edit Bot` ‚Üí `Edit Commands`
3. –í—Å—Ç–∞–≤—å:

```
start - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
help - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
myname - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤–æ—ë –∏–º—è
stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞
memory - –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–∞–º—è—Ç–∏
context - –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
clear_context - –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
rhythm - –°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
imagine - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
vision - –°—Ç–∞—Ç—É—Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- `/auth` —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ**
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –ø–æ –ø–æ–ø—ã—Ç–∫–∞–º (–∑–∞—â–∏—Ç–∞ –æ—Ç brute force)
- –ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–∞—Ä–æ–ª–µ–º

### –ó–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª—è

‚ö†Ô∏è **–ó–∞–ø—Ä–µ—â–µ–Ω–æ** –∑–∞–ø—É—Å–∫–∞—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º `change_me_please`

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
```env
NEIRA_ALLOW_DEFAULT_ADMIN_PASSWORD=true
```

### –õ–∏–º–∏—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------------------|
| `NEIRA_TG_AUTH_MAX_ATTEMPTS` | 5 –ø–æ–ø—ã—Ç–æ–∫ |
| `NEIRA_TG_AUTH_WINDOW_SECONDS` | 300 —Å–µ–∫ (5 –º–∏–Ω) |
| `NEIRA_TG_AUTH_BLOCK_SECONDS` | 900 —Å–µ–∫ (15 –º–∏–Ω) |

---

## üß≠ –†–µ–∂–∏–º—ã –¥–æ—Å—Ç—É–ø–∞

| –†–µ–∂–∏–º | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `open` | –û—Ç–≤–µ—á–∞–µ—Ç –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º |
| `whitelist` | –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º (—á–µ—Ä–µ–∑ `/admin add`) |
| `admin_only` | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É |

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞:
```
/admin mode whitelist
```

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ

```env
TELEGRAM_BOT_TOKEN=—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
NEIRA_ADMIN_PASSWORD=–Ω–∞–¥—ë–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å
```

### –î–æ—Å—Ç—É–ø –∏ –≥—Ä—É–ø–ø—ã

```env
NEIRA_TG_ACCESS=open|whitelist|admin_only
NEIRA_TG_CHANNELS=123456789,-987654321
NEIRA_TG_MENTION_ONLY=true
```

### –°–µ—Ç—å –∏ —Ç–∞–π–º–∞—É—Ç—ã

```env
NEIRA_TG_PROXY_URL=socks5://127.0.0.1:9050
NEIRA_TG_CONNECT_TIMEOUT=15
NEIRA_TG_READ_TIMEOUT=30
NEIRA_TG_POLLING_TIMEOUT=10
```

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ—Ç–∞

```env
NEIRA_TG_RESPONSE_MAX_CHARS=4096
NEIRA_TG_DISABLE_TEMPLATES=false
NEIRA_TG_TYPING_THROTTLE_SECONDS=3.0
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è FAST_CHAT (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–†–µ–∂–∏–º –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö. –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç—è–∂—ë–ª—ã–µ —ç—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –æ—Ç–≤–µ—Ç–∞  
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ~2 LLM –≤—ã–∑–æ–≤–∞ –≤–º–µ—Å—Ç–æ 5+ –¥–ª—è –∑–∞–¥–∞—á "—Ä–∞–∑–≥–æ–≤–æ—Ä" –∏ "–≤–æ–ø—Ä–æ—Å".

```env
# –í–∫–ª—é—á–∏—Ç—å –±—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º
NEIRA_FAST_CHAT=true

# –¢–∏–ø—ã –∑–∞–¥–∞—á –¥–ª—è FAST_CHAT (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
NEIRA_FAST_CHAT_TYPES=—Ä–∞–∑–≥–æ–≤–æ—Ä,–≤–æ–ø—Ä–æ—Å

# –ß—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å (–≤—Å–µ true –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏)
NEIRA_FAST_CHAT_SKIP_PLANNING=true
NEIRA_FAST_CHAT_SKIP_VERIFY=true
NEIRA_FAST_CHAT_SKIP_FACTS=true

# –ë–µ–∑ —Ä–µ—Ç—Ä–∞–µ–≤ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
NEIRA_FAST_CHAT_MAX_RETRIES=0

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (6 = –º—è–≥—á–µ, –º–µ–Ω—å—à–µ –ª–∏—à–Ω–∏—Ö —Ä–µ—Ç—Ä–∞–µ–≤)
NEIRA_MIN_ACCEPTABLE_SCORE=6
```

---

## üìÅ –§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `neira_authorized_users.json` | Whitelist –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `neira_tg_settings.json` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∏ –∫–∞–Ω–∞–ª–æ–≤ |
| `neira_user_profiles.json` | –ò–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

---

## ‚ùì –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### `/auth` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –≤ **–ª–∏—á–Ω–æ–º —á–∞—Ç–µ**, –Ω–µ –≤ –≥—Ä—É–ø–ø–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ –≥—Ä—É–ø–ø–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å `NEIRA_TG_MENTION_ONLY` (–µ—Å–ª–∏ `true` ‚Äî —É–ø–æ–º—è–Ω–∏ –±–æ—Ç–∞)
- ‚úÖ –î–æ–±–∞–≤—å –≥—Ä—É–ø–ø—É: `/admin thisgroup`

### –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
```bash
python tools/check_telegram_connectivity.py
```
–ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ–∫—Å–∏:
```env
NEIRA_TG_PROXY_URL=socks5://127.0.0.1:9050
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ `neira_tg_settings.json`.
–£–¥–∞–ª–∏ `NEIRA_TG_ACCESS` –∏–∑ `.env` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª.

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏](../guides/USER_MANAGEMENT.md)
- [–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏](../guides/FEEDBACK_SYSTEM.md)
- [–ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](../README.md)
