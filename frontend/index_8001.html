<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Neira AI (8001)</title>
  <link rel="stylesheet" href="style.css" />
  <script>
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–¥—Ä–µ—Å backend, –µ—Å–ª–∏ –ø–æ—Ä—Ç 8000 –∑–∞–Ω—è—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä Apache).
    window.NEIRA_API_URL = 'http://127.0.0.1:8001/api';
    window.NEIRA_WS_URL = 'ws://127.0.0.1:8001/ws/chat';
  </script>
</head>
<body>
  <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ DOM, —á—Ç–æ –∏ –≤ index.html -->
  <div class="container">
    <header class="header">
      <h1>üß† Neira AI</h1>
      <div class="header-controls">
        <button class="artifact-toggle" id="artifactToggle" title="–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã">üé®</button>
        <button class="control-panel-toggle" id="controlPanelToggle" title="–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è">‚öôÔ∏è</button>
        <button class="stats-toggle" id="statsToggle" title="–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É">üìä</button>
        <div class="connection-status" id="connectionStatus">
          <span class="status-indicator" id="statusIndicator"></span>
          <span id="statusText">Connecting...</span>
        </div>
      </div>
    </header>

    <div class="main-layout">
      <div class="chat-section">
        <div class="chat-container">
          <div class="messages" id="messages">
            <div class="message system">
              <div class="message-content">
                –ü—Ä–∏–≤–µ—Ç! –Ø Neira. Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ <b>127.0.0.1:8001</b>.<br>
                üí° –ü–æ–ø—Ä–æ—Å–∏ –º–µ–Ω—è —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: "–°–æ–∑–¥–∞–π UI –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –¥–ª—è RPG"
              </div>
            </div>
          </div>

          <div class="stage-indicator" id="stageIndicator" style="display: none;">
            <div class="stage-icon">‚öôÔ∏è</div>
            <div class="stage-text" id="stageText"></div>
          </div>

          <div class="input-container">
            <textarea id="userInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." rows="3"></textarea>
            <button id="sendButton" class="send-button">
              <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
              <span class="shortcut">‚èé</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Artifact Viewer -->
      <aside class="artifact-viewer" id="artifactViewer">
        <div class="artifact-header">
          <h2>üé® –ê—Ä—Ç–µ—Ñ–∞–∫—Ç</h2>
          <div class="artifact-controls">
            <button class="artifact-btn" id="artifactRefresh" title="–û–±–Ω–æ–≤–∏—Ç—å">üîÑ</button>
            <button class="artifact-btn" id="artifactExpand" title="–í–æ –≤–µ—Å—å —ç–∫—Ä–∞–Ω">‚õ∂</button>
            <button class="artifact-btn" id="artifactExport" title="–≠–∫—Å–ø–æ—Ä—Ç HTML">üíæ</button>
            <button class="artifact-btn" id="artifactClose" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
          </div>
        </div>
        <div class="artifact-info" id="artifactInfo">
          <span class="artifact-template">–®–∞–±–ª–æ–Ω: <b id="templateName">‚Äî</b></span>
          <span class="artifact-id">ID: <code id="artifactId">‚Äî</code></span>
        </div>
        <iframe 
          id="artifactFrame" 
          class="artifact-frame" 
          sandbox="allow-scripts allow-same-origin"
          title="Neira Artifact"
        ></iframe>
        <div class="artifact-empty" id="artifactEmpty">
          <div class="empty-icon">üé®</div>
          <p>–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
          <small>–ü–æ–ø—Ä–æ—Å–∏—Ç–µ Neira —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</small>
        </div>
      </aside>

      <aside class="control-panel" id="controlPanel">
        <div class="panel-header">
          <h2>‚öôÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
          <button class="close-button" id="closeControlPanel">‚úï</button>
        </div>
        <div class="panel-content">
          <!-- –ú–æ–¥–µ–ª—å -->
          <div class="control-group">
            <h3>ü§ñ –ú–æ–¥–µ–ª—å</h3>
            <label>
              <span>–û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å:</span>
              <select id="mainModelSelect">
                <option value="auto">Auto (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</option>
              </select>
            </label>
            <label>
              <span>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</span>
              <input type="range" id="temperatureSlider" min="0" max="20" step="1" value="7">
              <span id="temperatureValue">0.7</span>
            </label>
          </div>

          <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç -->
          <div class="control-group">
            <h3>üìö –ö–æ–Ω—Ç–µ–∫—Å—Ç</h3>
            <label>
              <span>–†–∞–∑–º–µ—Ä –æ–∫–Ω–∞:</span>
              <input type="range" id="contextSizeSlider" min="2" max="20" step="1" value="10">
              <span id="contextSizeValue">10</span>
            </label>
            <label>
              <span>–ú–∞–∫—Å. —Ç–æ–∫–µ–Ω–æ–≤:</span>
              <input type="number" id="maxTokensInput" min="512" max="32768" step="512" value="4096">
            </label>
          </div>

          <!-- –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã -->
          <div class="control-group">
            <h3>üéØ –†–µ–∂–∏–º—ã</h3>
            <label class="checkbox-label">
              <input type="checkbox" id="streamMode" checked>
              <span>Streaming –æ—Ç–≤–µ—Ç—ã</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="debugMode">
              <span>Debug —Ä–µ–∂–∏–º</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="autoMemoryMode" checked>
              <span>–ê–≤—Ç–æ-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏</span>
            </label>
          </div>

          <!-- –°–∏—Å—Ç–µ–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
          <div class="control-group">
            <h3>üîß –°–∏—Å—Ç–µ–º–∞</h3>
            <button class="action-button" id="clearContextBtn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç</button>
            <button class="action-button" id="resetMemoryBtn">‚ôªÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø–∞–º—è—Ç—å</button>
            <button class="action-button" id="exportSettingsBtn">üíæ –≠–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫</button>
            <button class="action-button" id="importSettingsBtn">üìÇ –ò–º–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫</button>
          </div>

          <!-- –õ–æ–≥–∏ -->
          <div class="control-group">
            <h3>üìã –õ–æ–≥–∏</h3>
            <div class="log-viewer" id="logViewer">
              <div class="log-entry">–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞</div>
            </div>
            <button class="action-button" id="clearLogsBtn">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
          </div>
        </div>
      </aside>

      <aside class="stats-sidebar">
        <div class="stats-header">
          <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
          <button class="refresh-button" id="refreshStats">üîÑ</button>
        </div>
        <div class="stats-content">
          <div class="stat-group">
            <h3>–ú–æ–¥–µ–ª—å</h3>
            <div class="stat-item"><span>Current:</span> <span id="currentModel">-</span></div>
            <div class="stat-item"><span>Switches:</span> <span id="modelSwitches">-</span></div>
          </div>
          <div class="stat-group">
            <h3>–ü–∞–º—è—Ç—å</h3>
            <div class="stat-item"><span>Total:</span> <span id="memoryTotal">-</span></div>
            <div class="stat-item"><span>Context:</span> <span id="memoryContext">-</span></div>
          </div>
          <div class="stat-group">
            <h3>–û–ø—ã—Ç</h3>
            <div class="stat-item"><span>Total:</span> <span id="expTotal">-</span></div>
            <div class="stat-item"><span>Score:</span> <span id="expScore">-</span></div>
          </div>
          <div class="stat-group">
            <h3>–ö–æ–¥/–ü—Ä–∏—á–∏–Ω–∞/–õ–∏—á–Ω–æ—Å—Ç—å</h3>
            <div class="stat-item"><span>Code:</span> <span id="modelCode">-</span></div>
            <div class="stat-item"><span>Reason:</span> <span id="modelReason">-</span></div>
            <div class="stat-item"><span>Personality:</span> <span id="modelPersonality">-</span></div>
          </div>
          <div class="stat-group">
            <h3>Cloud</h3>
            <div class="stat-item"><span>Code:</span> <span id="cloudCode">-</span></div>
            <div class="stat-item"><span>Universal:</span> <span id="cloudUniversal">-</span></div>
            <div class="stat-item"><span>Vision:</span> <span id="cloudVision">-</span></div>
          </div>
          <div class="stat-group">
            <h3>VRAM</h3>
            <div class="stat-item"><span>Usage:</span> <span id="vramUsage">-</span></div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
