# Инструкции для Copilot по проекту Neira

Ниже — набор подсказок, которые можно добавить в Custom Instructions Copilot или просто держать под рукой при работе над проектом.

## Базовые правила кода
- Пиши на русском: имена коммитов, названия задач и комментарии.
- Не оборачивай импорты в try/except — используй `importlib.util.find_spec` и явные проверки наличия зависимостей.
- Всегда возвращай структурированные причины ошибок (`reason_code`, `reason_detail`) в `CellResult.metadata` и в текстовых ответах.
- Для моделей LLM выбирай `MODEL_CHAT` (если есть) или `MODEL_REASON` из `cells` — без жёстких строковых констант.
- Держи функции компактными: не более 60 строк, вложенность до 3 уровней.

## Что можно делегировать Copilot
- Генерацию обёрток для безопасных импортов и фоллбэков зависимостей.
- Добавление и обновление unit-тестов для `web_cell.py` и соседних модулей.
- Рефакторинг сообщений об ошибках и метаданных, чтобы везде были `reason_code`/`reason_detail`.
- Подготовку шаблонов CLI-примеров и скриптов для быстрой проверки функционала.

## Проверки перед коммитом
- Локально прогоняй `python -m unittest test_web_cell.py`.
- При изменениях в web-клетках дополнительно запусти `python web_cell.py` и убедись, что ошибки возвращаются осмысленно без DuckDuckGo.

## Подсказки для промптов Copilot
- «Обнови web_cell.py, сохранивая механизм safe import через importlib и структуру reason_code/reason_detail.»
- «Добавь тест, который проверяет загрузку модуля без duckduckgo-search и requests, и возвращение понятной ошибки.»
- «Сформируй CellResult с подробным metadata (query/topic, sources, reason_code).»
- «Не используй глобальные try/except на импорты, замени на find_spec + явные исключения при отсутствии критичных модулей.»
